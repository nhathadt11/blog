<!doctype html><html><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><title>Thread - Rihe's Blog</title><meta name=viewport content="width=device-width,initial-scale=1"><meta property="og:title" content="Thread"><meta property="og:description" content="Thread là một phần của process, nhằm mục đích hạn chế thời gian context switch của process và tận dụng tối đa thời gian ma CPU giành cho process để xử lí nhiều hơn một chức năng của process đó."><meta property="og:type" content="article"><meta property="og:url" content="https://nhathadt11.github.io/blog/posts/thread/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-10-06T18:42:01+07:00"><meta property="article:modified_time" content="2022-10-06T18:42:01+07:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Thread"><meta name=twitter:description content="Thread là một phần của process, nhằm mục đích hạn chế thời gian context switch của process và tận dụng tối đa thời gian ma CPU giành cho process để xử lí nhiều hơn một chức năng của process đó."><link href="https://fonts.googleapis.com/css?family=Ubuntu:300,400,300italic,400italic|Raleway:200,300" rel=stylesheet><link rel=stylesheet type=text/css media=screen href=https://nhathadt11.github.io/blog/css/normalize.css><link rel=stylesheet type=text/css media=screen href=https://nhathadt11.github.io/blog/css/main.css><link rel=stylesheet type=text/css href=https://nhathadt11.github.io/blog/css/dark.css media="(prefers-color-scheme: dark)"><script src=https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js></script>
<script src=https://nhathadt11.github.io/blog/js/main.js></script></head><body><div class="container wrapper post"><div class=header><base href=https://nhathadt11.github.io/blog/><h1 class=site-title><a href=https://nhathadt11.github.io/blog/>Rihe's Blog</a></h1><div class=site-description><h2>Personal blog</h2><nav class="nav social"><ul class=flat><a href=https://github.com/nhathadt11 title=Github><i data-feather=github></i></a><a href=/index.xml title=RSS><i data-feather=rss></i></a></ul></nav></div><nav class=nav><ul class=flat><li><a href=/blog/>Home</a></li><li><a href=/blog/posts>All posts</a></li><li><a href=/blog/notes>Notes</a></li><li><a href=/blog/tags>Tags</a></li></ul></nav></div><div class=post-header><h1 class=title>Thread</h1><div class=meta>Posted at &mdash; Oct 6, 2022</div></div><div class=markdown><p><strong>Thread</strong> là một phần của process, nhằm mục đích hạn chế thời gian context switch của process và tận dụng tối đa thời gian ma CPU giành cho process để xử lí nhiều hơn một chức năng của process đó.</p><h2 id=đặc-điểm-của-thread><strong>Đặc điểm của thread</strong></h2><ul><li>Nhiều thread tạo thành một chuỗi tuần tự các lềnh trong một process cần được thực thi</li><li>Sử dụng chung vùng không gian địa chỉ và tài nguyên phần cứng của process chứa nó</li><li>Mỗi thread có vùng stack, thanh ghi PC và các thanh ghi khác</li><li>Không có sự phân cách giữa các thread trong cùng 1 process</li><li>Có thể chứa một số thuộc thính của process (lightweight process)</li><li>Multithreading</li></ul><h2 id=có-2-cách-thực-thi-thread><strong>Có 2 cách thực thi thread</strong></h2><h3 id=user-space><strong>User space</strong></h3><p>Toàn bộ thread chỉ nằm và được xử lý trong vùng của user và chỉ user mới nhận biết được, vùng kernel chỉ biết process. Để quản lí các thread, hệ thống sẽ sử dụng thread table nằm trong process ở thành phần user. Thread table sẽ nắm giữ thông tin thread nào đang ở trạng thái nào sẵn sàng được chạy (ready) và thread nào chưa (block).</p><ol><li><em>Ưu điểm:</em><ul><li>Vì các thành phần trong context switch của thread chỉ bao gồm thanh ghi PC, thanh ghi trạng thái, con trỏ stack, và một số thanh ghi khác nên việc chuyển đổi diễn ra nhanh hơn nhiều so với process</li><li>Vì đặc điểm giống như một mini-process, các thuật giải cho process cũng được áp dụng cho thread</li></ul></li><li><em>Nhược điểm:</em><ul><li>Việc block system call của thread là khó khan vì kernel không nhận diện được nó. Do đó, thay vi chỉ block các thread cần thiết thì cả process sẽ bị block</li><li>Vì lí do người lập trình muốn sự chính xác trong phần mềm, việc system call xảy ra liên tục là điều khó tránh khỏi</li></ul></li></ol><h3 id=kernel><strong>Kernel</strong></h3><p>Hệ thống cho phép thành phần kernel nhận diện thread và thread table nằm vùng kernel. Thread được tạo mới và xóa bỏ ngay tại kernel. Một số hệ thống cải thiện thời gian bằng cách sử dụng lại thread đã bị xóa bỏ. Thực tế, bằng cách này, thread không thực sự bị xóa đi trong một khoảng thời gian nhất định nào đó, mà đơn giản nó được đánh dấu là không còn được sử dụng. Khi vẫn còn đang trong thời gian đánh dấu, thread có thể được tái sử dùng nếu cần mà không cần phải tạo mới.</p><ol><li><em>Ưu điểm:</em><ul><li>Kernel có thẻ chuyển đổi giữa các thread của các process khác nhau</li></ul></li><li><em>Nhược điểm:</em><ul><li>Tốn thời gian và tài Nguyên để quản lý thread</li><li>Khi thread được tạo mới và lưu trữ chậm vì cần thực hiện system call</li></ul></li></ol></div><div class=post-tags></div></div><div class="footer wrapper"><nav class=nav><div>© Rihe | <a href=https://github.com/vividvilla/ezhil>Ezhil theme</a> | Built with <a href=https://gohugo.io>Hugo</a></div></nav></div><script>feather.replace()</script></body></html>